<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF8">
    <title>libs/metattache.rb</title>
    <link rel="STYLESHEET" href="styles.css">
    <script src="main.js" type="text/javascript"></script>
</head>
<body><div id="content"><h1>libs/metattache.rb</h1><p><a href="./index.html">Return to the index.</a><p><h2>Table of Contents</h2><p><em>Function count: 4</em></p><p>Click on genres to show all functions in that genre.</p><table id="toc"><tr><td class="genre-source">(parsing<span class="minimize"></span>)</td><td><code><a href="#AST">AST</a></code>, <code><a href="#Shunt">Shunt</a></code>, <code><a href="#Tokenize">Tokenize</a></code>, <code><a href="#Traverse">Traverse</a></code></td></tr></table><div id="functions"><div class="function" id="AST"><h2><code>AST[<span class="type">string</span> text] &rarr; <span class="return">[hash]</span> </code><span class="genre">(parsing)</span></h2>Returns an Abstract Syntax Tree representing the operator structure of <code>text</code> in Attache. <button class="source-button" id="AST-button">toggle source</button><div id="AST-source" class="code-source"><pre>AtState.function("AST") { |inst, text|
    at_ast(text)
}
</pre></div></div><div class="function" id="Shunt"><h2><code>Shunt[<span class="type">string</span> text] &rarr; <span class="return">[token]</span> </code><span class="genre">(parsing)</span></h2>Returns the Shunting Yard algorithm performed on the tokens of <code>text</code>. <button class="source-button" id="Shunt-button">toggle source</button><div id="Shunt-source" class="code-source"><pre>AtState.function("Shunt") { |inst, text|
    parse(text).map { |tok|
        a, b, c = tok
        Token.new a, b.to_s, c
    }
}
</pre></div></div><div class="function" id="Tokenize"><h2><code>Tokenize[<span class="type">string</span> text] &rarr; <span class="return">[token]</span> </code><span class="genre">(parsing)</span></h2>Returns the tokens of <code>text</code>. <button class="source-button" id="Tokenize-button">toggle source</button><div id="Tokenize-source" class="code-source"><pre>AtState.function("Tokenize") { |inst, text|
    tokenize(text).map { |tok|
        a, b, c = tok
        Token.new a, b.to_s, c
    }
}
</pre></div></div><div class="function" id="Traverse"><h2><code>Traverse[<span class="type">[tree]</span> nodes, **opts] &rarr; <span class="return">[(*)]</span> </code><span class="genre">(parsing)</span></h2>Iterates over <code>nodes</code> using the options given by <code>opts</code> <button class="source-button" id="Traverse-button">toggle source</button><div id="Traverse-source" class="code-source"><pre>AtState.function("Traverse", configurable: true) { |inst, nodes, **opts|
    rec = lambda { |inst, node|
        args = node.children.map { |child|
            if Node === child
                rec[inst, child]
            else
                opts[:getValue][inst, child]
            end
        }
        opts[:operators][node.head.raw][inst, *args]
    }

    nodes = at_ast(nodes)

    nodes.map { |child|
        rec[inst, child]
    }
}
</pre></div></div></div></div></body>
</html>